{
    "sourceFile": "resources/views/subscriptions/checkout.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 30,
            "patches": [
                {
                    "date": 1655866131499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1655866339267,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,14 @@\n     <div class=\"py-12\">\n         <div class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n-                    <form action=\"\"></form>\n+                    <form action=\"\">\n+                        <div class=\"form-group\">\n+                            <label for=\"name\">Name on card</label>\n+                            <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n+                        </div>\n+                    </form>\n                 </div>\n             </div>\n         </div>\n     </div>\n"
                },
                {
                    "date": 1655866362668,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,12 @@\n                         <div class=\"form-group\">\n                             <label for=\"name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n+                        <div class=\"form-group\">\n+                            <label for=\"name\">Name on card</label>\n+                            <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n+                        </div>\n                     </form>\n                 </div>\n             </div>\n         </div>\n"
                },
                {
                    "date": 1655866388874,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n                             <label for=\"name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n                         <div class=\"form-group\">\n-                            <label for=\"name\">Name on card</label>\n+                            <label for=\"name\">Card details</label>\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n                     </form>\n                 </div>\n"
                },
                {
                    "date": 1655866600257,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,12 +15,15 @@\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n                         <div class=\"form-group\">\n                             <label for=\"name\">Card details</label>\n-                            <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n                     </form>\n                 </div>\n             </div>\n         </div>\n     </div>\n+\n+    <script>\n+        const Stripe = Stripe('{{ config('cashier.key') }}');\n+    </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655866615684,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,7 +23,7 @@\n         </div>\n     </div>\n \n     <script>\n-        const Stripe = Stripe('{{ config('cashier.key') }}');\n+        const stripe = Stripe('{{ config('cashier.key') }}');\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655866766680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,6 +24,11 @@\n     </div>\n \n     <script>\n         const stripe = Stripe('{{ config('cashier.key') }}');\n+\n+        const elements = stripe.elements();\n+        const cardElement = elements.create('card');\n+\n+        cardElement.mount('#card-element');\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655866775393,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,8 +15,9 @@\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n                         <div class=\"form-group\">\n                             <label for=\"name\">Card details</label>\n+                            <div id=\"card-element\"></div>\n                         </div>\n                     </form>\n                 </div>\n             </div>\n"
                },
                {
                    "date": 1655866933554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,10 @@\n                         <div class=\"form-group\">\n                             <label for=\"name\">Card details</label>\n                             <div id=\"card-element\"></div>\n                         </div>\n+\n+                        <button type=\"submit\" id=\"card-button\">pay</button>\n                     </form>\n                 </div>\n             </div>\n         </div>\n"
                },
                {
                    "date": 1655867015245,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n     <div class=\"py-12\">\n         <div class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n-                    <form action=\"\">\n+                    <form action=\"\" method=\"post\" >\n                         <div class=\"form-group\">\n                             <label for=\"name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n"
                },
                {
                    "date": 1655945098270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n     <div class=\"py-12\">\n         <div class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n-                    <form action=\"\" method=\"post\" >\n+                    <form action=\"\" method=\"post\" id=\"card-form\">\n                         <div class=\"form-group\">\n                             <label for=\"name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n@@ -32,6 +32,8 @@\n         const elements = stripe.elements();\n         const cardElement = elements.create('card');\n \n         cardElement.mount('#card-element');\n+\n+        const form = document.getElementById('card-form');\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655945145566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,6 +34,9 @@\n \n         cardElement.mount('#card-element');\n \n         const form = document.getElementById('card-form');\n+        form.addEventListener('submit', async ()=>{\n+\n+        });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655945192206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,10 @@\n \n         cardElement.mount('#card-element');\n \n         const form = document.getElementById('card-form');\n-        form.addEventListener('submit', async ()=>{\n-\n+        form.addEventListener('submit', async (e) => {\n+            e.preventDfault();\n+            console.log('submitted');\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655945249900,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n     <div class=\"py-12\">\n         <div class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n-                    <form action=\"\" method=\"post\" id=\"card-form\">\n+                    <form action=\"\" id=\"card-form\">\n                         <div class=\"form-group\">\n                             <label for=\"name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n"
                },
                {
                    "date": 1655945338744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n         cardElement.mount('#card-element');\n \n         const form = document.getElementById('card-form');\n         form.addEventListener('submit', async (e) => {\n-            e.preventDfault();\n+            e.preventDefault();\n             console.log('submitted');\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655945355855,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n     <div class=\"py-12\">\n         <div class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n-                    <form action=\"\" id=\"card-form\">\n+                    <form action=\"\" method=\"post\" id=\"card-form\">\n                         <div class=\"form-group\">\n                             <label for=\"name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n                         </div>\n"
                },
                {
                    "date": 1655945407653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,8 +34,9 @@\n \n         cardElement.mount('#card-element');\n \n         const form = document.getElementById('card-form');\n+        const cardButton = document.getElementById('card-button');\n         form.addEventListener('submit', async (e) => {\n             e.preventDefault();\n             console.log('submitted');\n         });\n"
                },
                {
                    "date": 1655945422439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,8 +37,8 @@\n         const form = document.getElementById('card-form');\n         const cardButton = document.getElementById('card-button');\n         form.addEventListener('submit', async (e) => {\n             e.preventDefault();\n-            console.log('submitted');\n+            cardButton.disabled = ture\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655945530911,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n                             <label for=\"name\">Card details</label>\n                             <div id=\"card-element\"></div>\n                         </div>\n \n-                        <button type=\"submit\" id=\"card-button\">pay</button>\n+                        <button type=\"submit\" id=\"card-button\" data-secret=\"{{ $intent->client_secret }}\">pay</button>\n                     </form>\n                 </div>\n             </div>\n         </div>\n@@ -37,8 +37,8 @@\n         const form = document.getElementById('card-form');\n         const cardButton = document.getElementById('card-button');\n         form.addEventListener('submit', async (e) => {\n             e.preventDefault();\n-            cardButton.disabled = ture\n+            cardButton.disabled = true\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655945671612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,10 +10,10 @@\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n                     <form action=\"\" method=\"post\" id=\"card-form\">\n                         <div class=\"form-group\">\n-                            <label for=\"name\">Name on card</label>\n-                            <input type=\"text\" name=\"name\" id=\"name\" class=\"from-control\">\n+                            <label for=\"card-holder-name\">Name on card</label>\n+                            <input type=\"text\" name=\"name\" id=\"card-holder-name\" class=\"from-control\">\n                         </div>\n                         <div class=\"form-group\">\n                             <label for=\"name\">Card details</label>\n                             <div id=\"card-element\"></div>\n@@ -35,8 +35,9 @@\n         cardElement.mount('#card-element');\n \n         const form = document.getElementById('card-form');\n         const cardButton = document.getElementById('card-button');\n+        const cardHolderName = document.getElementById('card-holder-name');\n         form.addEventListener('submit', async (e) => {\n             e.preventDefault();\n             cardButton.disabled = true\n         });\n"
                },
                {
                    "date": 1655945798320,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,8 +38,20 @@\n         const cardButton = document.getElementById('card-button');\n         const cardHolderName = document.getElementById('card-holder-name');\n         form.addEventListener('submit', async (e) => {\n             e.preventDefault();\n-            cardButton.disabled = true\n+            cardButton.disabled = true;\n+\n+            await stripe.confirmCartSetup(\n+                cardButton.dataset.secret,\n+                {\n+                    payment_method: {\n+                        card: cardElement,\n+                        billing_details: {\n+                            name: cardHolderName.value\n+                        }\n+                    }\n+                }\n+            );\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655945832284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,9 @@\n         form.addEventListener('submit', async (e) => {\n             e.preventDefault();\n             cardButton.disabled = true;\n \n-            await stripe.confirmCartSetup(\n+            await stripe.confirmCardSetup(\n                 cardButton.dataset.secret,\n                 {\n                     payment_method: {\n                         card: cardElement,\n"
                },
                {
                    "date": 1655945938623,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,9 @@\n         form.addEventListener('submit', async (e) => {\n             e.preventDefault();\n             cardButton.disabled = true;\n \n-            await stripe.confirmCardSetup(\n+            const {setupIntent, error} = await stripe.confirmCardSetup(\n                 cardButton.dataset.secret,\n                 {\n                     payment_method: {\n                         card: cardElement,\n"
                },
                {
                    "date": 1655947665255,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,7 +51,8 @@\n                         }\n                     }\n                 }\n             );\n+            console.log(setupIntent);\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655947696647,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,8 +51,8 @@\n                         }\n                     }\n                 }\n             );\n-            console.log(setupIntent);\n+            console.log(error, setupIntent);\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655947788841,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,19 +40,26 @@\n         form.addEventListener('submit', async (e) => {\n             e.preventDefault();\n             cardButton.disabled = true;\n \n-            const {setupIntent, error} = await stripe.confirmCardSetup(\n-                cardButton.dataset.secret,\n-                {\n+            const {\n+                setupIntent,\n+                error\n+            } = await stripe.confirmCardSetup(\n+                cardButton.dataset.secret, {\n                     payment_method: {\n                         card: cardElement,\n                         billing_details: {\n                             name: cardHolderName.value\n                         }\n                     }\n                 }\n             );\n-            console.log(error, setupIntent);\n+\n+            if (error) {\n+                cardButton.disabled = false;\n+            } else {\n+                console.log(error, setupIntent);\n+            }\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655948077540,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,16 @@\n \n             if (error) {\n                 cardButton.disabled = false;\n             } else {\n-                console.log(error, setupIntent);\n+                let token = document.createElement('input');\n+                token.setAttrebute('type', 'hidden');\n+                token.setAttrebute('name', 'token');\n+                token.setAttrebute('value', setupIntent.payment_method);\n+\n+                form.appendChild(token);\n+\n+                form.submit();\n             }\n         });\n     </script>\n </x-app-layout>\n"
                },
                {
                    "date": 1655948211059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n     <div class=\"py-12\">\n         <div class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n-                    <form action=\"\" method=\"post\" id=\"card-form\">\n+                    <form action=\"{{ route('subscriptions.store') }}\" method=\"post\" id=\"card-form\">\n                         <div class=\"form-group\">\n                             <label for=\"card-holder-name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"card-holder-name\" class=\"from-control\">\n                         </div>\n"
                },
                {
                    "date": 1655948229772,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n         <div class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n                     <form action=\"{{ route('subscriptions.store') }}\" method=\"post\" id=\"card-form\">\n+                        @csrf\n                         <div class=\"form-group\">\n                             <label for=\"card-holder-name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"card-holder-name\" class=\"from-control\">\n                         </div>\n"
                },
                {
                    "date": 1655948276046,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,11 +59,11 @@\n             if (error) {\n                 cardButton.disabled = false;\n             } else {\n                 let token = document.createElement('input');\n-                token.setAttrebute('type', 'hidden');\n-                token.setAttrebute('name', 'token');\n-                token.setAttrebute('value', setupIntent.payment_method);\n+                token.setAttribute('type', 'hidden');\n+                token.setAttribute('name', 'token');\n+                token.setAttribute('value', setupIntent.payment_method);\n \n                 form.appendChild(token);\n \n                 form.submit();\n"
                },
                {
                    "date": 1655948433920,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,9 @@\n             <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                 <div class=\"p-6 bg-white border-b border-gray-200\">\n                     <form action=\"{{ route('subscriptions.store') }}\" method=\"post\" id=\"card-form\">\n                         @csrf\n+                        <input type=\"hidden\" name=\"plan\" value=\"{{ request('plan') }}\">\n                         <div class=\"form-group\">\n                             <label for=\"card-holder-name\">Name on card</label>\n                             <input type=\"text\" name=\"name\" id=\"card-holder-name\" class=\"from-control\">\n                         </div>\n"
                }
            ],
            "date": 1655866131499,
            "name": "Commit-0",
            "content": "<x-app-layout>\n    <x-slot name=\"header\">\n        <h2 class=\"font-semibold text-xl text-gray-800 leading-tight\">\n            {{ __('Checkout') }}\n        </h2>\n    </x-slot>\n\n    <div class=\"py-12\">\n        <div class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n            <div class=\"bg-white overflow-hidden shadow-sm sm:rounded-lg\">\n                <div class=\"p-6 bg-white border-b border-gray-200\">\n                    <form action=\"\"></form>\n                </div>\n            </div>\n        </div>\n    </div>\n</x-app-layout>\n"
        }
    ]
}